import{j as i}from"./jsx-runtime-CQsLhzk5.js";import{n as U,j as $e,l as ze,m as Ze,e as Je,f as Ke,h as Qe,b as Ue,k as Xe,z as Pe,w as Ye,u as et,a as tt,R as nt,F as rt,B as at,g as ot,t as Ee}from"./remix-stub-UXp-yz1T.js";import{r}from"./index-Wp2u197Z.js";import{c as it}from"./createLucideIcon-CkelgiAd.js";import{w as Ie,u as X,e as Oe}from"./index-BvTlRpDL.js";import"./index-BB6wrN1E.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=it("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var lt=Object.defineProperty,ut=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Se=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dt=(e,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&Se(e,n,t[n]);if(Y)for(var n of Y(t))Re.call(t,n)&&Se(e,n,t[n]);return e},pt=(e,t)=>ut(e,ct(t)),mt=(e,t)=>{var n={};for(var s in e)Fe.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Y)for(var s of Y(e))t.indexOf(s)<0&&Re.call(e,s)&&(n[s]=e[s]);return n};function ft(e){let t=setTimeout(e,0),n=setTimeout(e,10),s=setTimeout(e,50);return[t,n,s]}function ht(e){let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current}var gt=18,ke=40,vt=`${ke}px`,xt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function bt({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:s}){let[S,c]=r.useState(!1),[E,b]=r.useState(!1),[d,A]=r.useState(!1),k=r.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&S&&E,[S,E,n]),y=r.useCallback(()=>{let f=e.current,w=t.current;if(!f||!w||d||n==="none")return;let g=f,I=g.getBoundingClientRect().left+g.offsetWidth,W=g.getBoundingClientRect().top+g.offsetHeight/2,u=I-gt,H=W;document.querySelectorAll(xt).length===0&&document.elementFromPoint(u,H)===f||(c(!0),A(!0))},[e,t,d,n]);return r.useEffect(()=>{let f=e.current;if(!f||n==="none")return;function w(){let I=window.innerWidth-f.getBoundingClientRect().right;b(I>=ke)}w();let g=setInterval(w,1e3);return()=>{clearInterval(g)}},[e,n]),r.useEffect(()=>{let f=s||document.activeElement===t.current;if(n==="none"||!f)return;let w=setTimeout(y,0),g=setTimeout(y,2e3),I=setTimeout(y,5e3),W=setTimeout(()=>{A(!0)},6e3);return()=>{clearTimeout(w),clearTimeout(g),clearTimeout(I),clearTimeout(W)}},[t,s,n,y]),{hasPWMBadge:S,willPushPWMBadge:k,PWM_BADGE_SPACE_WIDTH:vt}}var Me=r.createContext({}),Ne=r.forwardRef((e,t)=>{var n=e,{value:s,onChange:S,maxLength:c,textAlign:E="left",pattern:b,placeholder:d,inputMode:A="numeric",onComplete:k,pushPasswordManagerStrategy:y="increase-width",pasteTransformer:f,containerClassName:w,noScriptCSSFallback:g=yt,render:I,children:W}=n,u=mt(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),H,ce,de,pe,me;let[De,Be]=r.useState(typeof u.defaultValue=="string"?u.defaultValue:""),p=s??De,M=ht(p),G=r.useCallback(a=>{S==null||S(a),Be(a)},[S]),C=r.useMemo(()=>b?typeof b=="string"?new RegExp(b):b:null,[b]),m=r.useRef(null),te=r.useRef(null),ne=r.useRef({value:p,onChange:G,isIOS:typeof window<"u"&&((ce=(H=window==null?void 0:window.CSS)==null?void 0:H.supports)==null?void 0:ce.call(H,"-webkit-touch-callout","none"))}),J=r.useRef({prev:[(de=m.current)==null?void 0:de.selectionStart,(pe=m.current)==null?void 0:pe.selectionEnd,(me=m.current)==null?void 0:me.selectionDirection]});r.useImperativeHandle(t,()=>m.current,[]),r.useEffect(()=>{let a=m.current,o=te.current;if(!a||!o)return;ne.current.value!==a.value&&ne.current.onChange(a.value),J.current.prev=[a.selectionStart,a.selectionEnd,a.selectionDirection];function h(){if(document.activeElement!==a){$(null),z(null);return}let l=a.selectionStart,x=a.selectionEnd,K=a.selectionDirection,T=a.maxLength,_=a.value,O=J.current.prev,F=-1,R=-1,D;if(_.length!==0&&l!==null&&x!==null){let He=l===x,Ge=l===_.length&&_.length<T;if(He&&!Ge){let B=l;if(B===0)F=0,R=1,D="forward";else if(B===T)F=B-1,R=B,D="backward";else if(T>1&&_.length>1){let oe=0;if(O[0]!==null&&O[1]!==null){D=B<O[1]?"backward":"forward";let Ve=O[0]===O[1]&&O[0]<T;D==="backward"&&!Ve&&(oe=-1)}F=oe+B,R=oe+B+1}}F!==-1&&R!==-1&&F!==R&&m.current.setSelectionRange(F,R,D)}let ye=F!==-1?F:l,we=R!==-1?R:x,Le=D??K;$(ye),z(we),J.current.prev=[ye,we,Le]}if(document.addEventListener("selectionchange",h,{capture:!0}),h(),document.activeElement===a&&re(!0),!document.getElementById("input-otp-style")){let l=document.createElement("style");if(l.id="input-otp-style",document.head.appendChild(l),l.sheet){let x="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Z(l.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Z(l.sheet,`[data-input-otp]:autofill { ${x} }`),Z(l.sheet,`[data-input-otp]:-webkit-autofill { ${x} }`),Z(l.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Z(l.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let P=()=>{o&&o.style.setProperty("--root-height",`${a.clientHeight}px`)};P();let v=new ResizeObserver(P);return v.observe(a),()=>{document.removeEventListener("selectionchange",h,{capture:!0}),v.disconnect()}},[]);let[fe,he]=r.useState(!1),[V,re]=r.useState(!1),[N,$]=r.useState(null),[q,z]=r.useState(null);r.useEffect(()=>{ft(()=>{var a,o,h,P;(a=m.current)==null||a.dispatchEvent(new Event("input"));let v=(o=m.current)==null?void 0:o.selectionStart,l=(h=m.current)==null?void 0:h.selectionEnd,x=(P=m.current)==null?void 0:P.selectionDirection;v!==null&&l!==null&&($(v),z(l),J.current.prev=[v,l,x])})},[p,V]),r.useEffect(()=>{M!==void 0&&p!==M&&M.length<c&&p.length===c&&(k==null||k(p))},[c,k,M,p]);let L=bt({containerRef:te,inputRef:m,pushPasswordManagerStrategy:y,isFocused:V}),ge=r.useCallback(a=>{let o=a.currentTarget.value.slice(0,c);if(o.length>0&&C&&!C.test(o)){a.preventDefault();return}typeof M=="string"&&o.length<M.length&&document.dispatchEvent(new Event("selectionchange")),G(o)},[c,G,M,C]),ve=r.useCallback(()=>{var a;if(m.current){let o=Math.min(m.current.value.length,c-1),h=m.current.value.length;(a=m.current)==null||a.setSelectionRange(o,h),$(o),z(h)}re(!0)},[c]),xe=r.useCallback(a=>{var o,h;let P=m.current;if(!f&&(!ne.current.isIOS||!a.clipboardData||!P))return;let v=a.clipboardData.getData("text/plain"),l=f?f(v):v;console.log({_content:v,content:l}),a.preventDefault();let x=(o=m.current)==null?void 0:o.selectionStart,K=(h=m.current)==null?void 0:h.selectionEnd,T=(x!==K?p.slice(0,x)+l+p.slice(K):p.slice(0,x)+l+p.slice(x)).slice(0,c);if(T.length>0&&C&&!C.test(T))return;P.value=T,G(T);let _=Math.min(T.length,c-1),O=T.length;P.setSelectionRange(_,O),$(_),z(O)},[c,G,C,p]),Ae=r.useMemo(()=>({position:"relative",cursor:u.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[u.disabled]),be=r.useMemo(()=>({position:"absolute",inset:0,width:L.willPushPWMBadge?`calc(100% + ${L.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:L.willPushPWMBadge?`inset(0 ${L.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:E,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[L.PWM_BADGE_SPACE_WIDTH,L.willPushPWMBadge,E]),We=r.useMemo(()=>r.createElement("input",pt(dt({autoComplete:u.autoComplete||"one-time-code"},u),{"data-input-otp":!0,"data-input-otp-placeholder-shown":p.length===0||void 0,"data-input-otp-mss":N,"data-input-otp-mse":q,inputMode:A,pattern:C==null?void 0:C.source,"aria-placeholder":d,style:be,maxLength:c,value:p,ref:m,onPaste:a=>{var o;xe(a),(o=u.onPaste)==null||o.call(u,a)},onChange:ge,onMouseOver:a=>{var o;he(!0),(o=u.onMouseOver)==null||o.call(u,a)},onMouseLeave:a=>{var o;he(!1),(o=u.onMouseLeave)==null||o.call(u,a)},onFocus:a=>{var o;ve(),(o=u.onFocus)==null||o.call(u,a)},onBlur:a=>{var o;re(!1),(o=u.onBlur)==null||o.call(u,a)}})),[ge,ve,xe,A,be,c,q,N,u,C==null?void 0:C.source,p]),ae=r.useMemo(()=>({slots:Array.from({length:c}).map((a,o)=>{var h;let P=V&&N!==null&&q!==null&&(N===q&&o===N||o>=N&&o<q),v=p[o]!==void 0?p[o]:null,l=p[0]!==void 0?null:(h=d==null?void 0:d[o])!=null?h:null;return{char:v,placeholderChar:l,isActive:P,hasFakeCaret:P&&v===null}}),isFocused:V,isHovering:!u.disabled&&fe}),[V,fe,c,q,N,u.disabled,p]),qe=r.useMemo(()=>I?I(ae):r.createElement(Me.Provider,{value:ae},W),[W,ae,I]);return r.createElement(r.Fragment,null,g!==null&&r.createElement("noscript",null,r.createElement("style",null,g)),r.createElement("div",{ref:te,"data-input-otp-container":!0,style:Ae,className:w},qe,r.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},We)))});Ne.displayName="Input";function Z(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var yt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const ie=r.forwardRef(({className:e,containerClassName:t,...n},s)=>i.jsx(Ne,{ref:s,containerClassName:U("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:U("disabled:cursor-not-allowed",e),...n}));ie.displayName="InputOTP";ie.__docgenInfo={description:"",methods:[],displayName:"InputOTP"};const ee=r.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:U("flex items-center",e),...t}));ee.displayName="OTPInputGroup";const j=r.forwardRef(({index:e,className:t,...n},s)=>{const S=r.useContext(Me),{char:c,hasFakeCaret:E,isActive:b}=S.slots[e];return i.jsxs("div",{ref:s,className:U("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",b&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[c,E&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});j.displayName="OTPInputSlot";const se=r.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(st,{})}));se.displayName="OTPInputSeparator";const le=r.forwardRef(({control:e,name:t,label:n,description:s,className:S,labelClassName:c,inputClassName:E,maxLength:b,components:d,...A},k)=>{const y=b===8,{formItemId:f}=r.useContext($e);return i.jsx(ze,{control:e,name:t,render:({field:w,fieldState:g})=>i.jsxs(Ze,{className:S,ref:k,children:[n&&i.jsx(Je,{Component:d==null?void 0:d.FormLabel,className:c,children:n}),i.jsx(Ke,{Component:d==null?void 0:d.FormControl,children:i.jsxs(ie,{ref:w.ref,id:f,"aria-describedby":f,value:w.value,onChange:w.onChange,className:E,maxLength:b,children:[i.jsxs(ee,{children:[i.jsx(j,{index:0}),i.jsx(j,{index:1}),i.jsx(j,{index:2}),y&&i.jsx(j,{index:3})]}),i.jsx(se,{}),i.jsxs(ee,{children:[i.jsx(j,{index:y?4:3}),i.jsx(j,{index:y?5:4}),i.jsx(j,{index:y?6:5}),y&&i.jsx(j,{index:7})]})]})}),s&&i.jsx(Qe,{Component:d==null?void 0:d.FormDescription,children:s}),g.error&&i.jsx(Ue,{Component:d==null?void 0:d.FormMessage,children:g.error.message})]})})});le.displayName="OTPInputField";ee.__docgenInfo={description:"",methods:[],displayName:"OTPInputGroup"};j.__docgenInfo={description:"",methods:[],displayName:"OTPInputSlot",props:{index:{required:!0,tsType:{name:"number"},description:""}}};se.__docgenInfo={description:"",methods:[],displayName:"OTPInputSeparator"};le.__docgenInfo={description:"",methods:[],displayName:"OTPInputField",props:{control:{required:!0,tsType:{name:"Control",elements:[{name:"TFieldValues"}],raw:"Control<TFieldValues>"},description:""},name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},labelClassName:{required:!1,tsType:{name:"string"},description:""},inputClassName:{required:!1,tsType:{name:"string"},description:""},maxLength:{required:!0,tsType:{name:"number"},description:""},components:{required:!1,tsType:{name:"Partial",elements:[{name:"FieldComponents"}],raw:"Partial<FieldComponents>"},description:""}},composes:["Omit"]};function ue(e){const{control:t}=Xe(),{name:n,...s}=e;if(!n)throw new Error("Name is required for OTPInput");return i.jsx(le,{control:t,name:n,...s})}ue.__docgenInfo={description:"",methods:[],displayName:"OTPInput"};const _e=Pe.object({otp:Pe.string().length(6,"Please enter a 6-digit code")}),wt=()=>{var n;const e=et(),t=tt({resolver:Ee(_e),defaultValues:{otp:""},fetcher:e,submitConfig:{action:"/",method:"post"}});return i.jsx(nt,{...t,children:i.jsxs(rt,{onSubmit:t.handleSubmit,children:[i.jsx(ue,{name:"otp",label:"One-Time Password",description:"Enter the 6-digit code sent to your phone.",maxLength:6}),i.jsx(at,{type:"submit",className:"mt-4",children:"Submit"}),((n=e.data)==null?void 0:n.message)&&i.jsx("p",{className:"mt-2 text-green-600",children:e.data.message})]})})},Pt=async e=>{const{errors:t,receivedValues:n}=await ot(e,Ee(_e));return t?{errors:t,defaultValues:n}:{message:"OTP verified successfully"}},Rt={title:"RemixHookForm/OTPInput",component:ue,parameters:{layout:"centered"},tags:["autodocs"],decorators:[Ye({root:{Component:wt,action:async({request:e})=>Pt(e)}})]},St=async({canvasElement:e})=>{const t=Ie(e),n=t.getByRole("button",{name:"Submit"}),s=e.querySelector("input");await X.type(s,"123"),await X.click(n),await Oe(t.findByText("Please enter a 6-digit code")).resolves.toBeInTheDocument()},Tt=async({canvasElement:e})=>{const t=Ie(e),n=t.getByRole("button",{name:"Submit"}),s=e.querySelector("input");await X.type(s,"123456"),await X.click(n),await Oe(t.findByText("OTP verified successfully")).resolves.toBeInTheDocument()},Q={play:async e=>{await St(e),await Tt(e)}};var Te,Ce,je;Q.parameters={...Q.parameters,docs:{...(Te=Q.parameters)==null?void 0:Te.docs,source:{originalSource:`{
  play: async storyContext => {
    await testIncompleteSubmission(storyContext);
    await testSubmission(storyContext);
  }
}`,...(je=(Ce=Q.parameters)==null?void 0:Ce.docs)==null?void 0:je.source}}};const kt=["Tests"];export{Q as Tests,kt as __namedExportsOrder,Rt as default};
