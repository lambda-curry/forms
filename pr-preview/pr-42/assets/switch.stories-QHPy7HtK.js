import{j as o}from"./jsx-runtime-CQsLhzk5.js";import{d as A,P as E,n as S,l as U,m as W,e as X,h as G,f as J,k as K,z as k,w as Q,u as Y,a as Z,R as ee,B as te,g as se,t as _}from"./remix-stub-UXp-yz1T.js";import{r as l}from"./index-Wp2u197Z.js";import{c as oe,a as ae,b as re,d as ne}from"./index-BFTZjNjp.js";import{u as ie}from"./index-C5ITVP_u.js";import{F as ce,a as de,b as le,c as me}from"./form-C1Hedwuh.js";import{w as v,e as u,u as C}from"./index-BvTlRpDL.js";import"./index-BB6wrN1E.js";var F="Switch",[ue,Be]=oe(F),[pe,he]=ue(F),D=l.forwardRef((e,t)=>{const{__scopeSwitch:s,name:r,checked:n,defaultChecked:a,required:i,disabled:d,value:c="on",onCheckedChange:g,form:x,...p}=e,[m,H]=l.useState(null),$=A(t,f=>H(f)),y=l.useRef(!1),R=m?x||!!m.closest("form"):!0,[h=!1,O]=ae({prop:n,defaultProp:a,onChange:g});return o.jsxs(pe,{scope:s,checked:h,disabled:d,children:[o.jsx(E.button,{type:"button",role:"switch","aria-checked":h,"aria-required":i,"data-state":I(h),"data-disabled":d?"":void 0,disabled:d,value:c,...p,ref:$,onClick:re(e.onClick,f=>{O(z=>!z),R&&(y.current=f.isPropagationStopped(),y.current||f.stopPropagation())})}),R&&o.jsx(fe,{control:m,bubbles:!y.current,name:r,value:c,checked:h,required:i,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});D.displayName=F;var q="SwitchThumb",M=l.forwardRef((e,t)=>{const{__scopeSwitch:s,...r}=e,n=he(q,s);return o.jsx(E.span,{"data-state":I(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})});M.displayName=q;var fe=e=>{const{control:t,checked:s,bubbles:r=!0,...n}=e,a=l.useRef(null),i=ie(s),d=ne(t);return l.useEffect(()=>{const c=a.current,g=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(g,"checked").set;if(i!==s&&p){const m=new Event("click",{bubbles:r});p.call(c,s),c.dispatchEvent(m)}},[i,s,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:a,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function I(e){return e?"checked":"unchecked"}var L=D,be=M;const T=l.forwardRef(({className:e,...t},s)=>o.jsx(L,{className:S("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:o.jsx(be,{className:S("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));T.displayName=L.displayName;T.__docgenInfo={description:"",methods:[]};const j=l.forwardRef(({control:e,name:t,className:s,label:r,description:n,components:a,...i},d)=>o.jsx(U,{control:e,name:t,render:({field:c})=>o.jsxs(W,{className:S("flex flex-row items-center justify-between rounded-lg border p-4",s),ref:d,children:[o.jsxs("div",{className:"space-y-0.5",children:[r&&o.jsx(X,{Component:a==null?void 0:a.FormLabel,children:r}),n&&o.jsx(G,{Component:a==null?void 0:a.FormDescription,children:n})]}),o.jsx(J,{Component:a==null?void 0:a.FormControl,children:o.jsx(T,{ref:c.ref,checked:c.value,onCheckedChange:c.onChange,...i})})]})}));j.displayName="SwitchField";j.__docgenInfo={description:"",methods:[],displayName:"SwitchField",props:{control:{required:!1,tsType:{name:"Control",elements:[{name:"TFieldValues"}],raw:"Control<TFieldValues>"},description:""},name:{required:!0,tsType:{name:"TName"},description:""},label:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},description:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},components:{required:!1,tsType:{name:"Partial",elements:[{name:"FieldComponents"}],raw:"Partial<FieldComponents>"},description:""}}};function w({name:e,label:t,description:s,className:r,...n}){const{control:a}=K(),i={FormDescription:ce,FormControl:de,FormLabel:le,FormMessage:me};return o.jsx(j,{control:a,name:e,label:t,description:s,components:i,...n})}w.__docgenInfo={description:"",methods:[],displayName:"Switch",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""}},composes:["Omit"]};const V=k.object({notifications:k.boolean().default(!1),darkMode:k.boolean().default(!1)}),we=()=>{var s;const e=Y(),t=Z({resolver:_(V),defaultValues:{notifications:!1,darkMode:!1},fetcher:e,submitConfig:{action:"/",method:"post"}});return o.jsx(ee,{...t,children:o.jsxs(e.Form,{onSubmit:t.handleSubmit,children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsx(w,{name:"notifications",label:"Enable notifications"}),o.jsx(w,{name:"darkMode",label:"Dark mode",description:"Toggle dark mode for the application"})]}),o.jsx(te,{type:"submit",className:"mt-4",children:"Submit"}),((s=e.data)==null?void 0:s.message)&&o.jsx("p",{className:"mt-2 text-green-600",children:e.data.message})]})})},ge=async e=>{const{errors:t}=await se(e,_(V));return t?{errors:t}:{message:"Settings updated successfully"}},Pe={title:"RemixHookForm/Switch",component:w,parameters:{layout:"centered"},tags:["autodocs"],decorators:[Q({root:{Component:we,action:async({request:e})=>ge(e)}})]},xe=({canvasElement:e})=>{const t=v(e),s=t.getByLabelText("Enable notifications"),r=t.getByLabelText("Dark mode");u(s).not.toBeChecked(),u(r).not.toBeChecked()},ye=async({canvasElement:e})=>{const t=v(e),s=t.getByLabelText("Enable notifications"),r=t.getByLabelText("Dark mode");await C.click(s),await C.click(r),u(s).toBeChecked(),u(r).toBeChecked()},ke=async({canvasElement:e})=>{const t=v(e),s=t.getByRole("button",{name:"Submit"});await C.click(s),await u(await t.findByText("Settings updated successfully")).toBeInTheDocument()},b={parameters:{docs:{description:{story:"The default switch component with form integration."}}},play:async e=>{xe(e),await ye(e),await ke(e)}};var N,B,P;b.parameters={...b.parameters,docs:{...(N=b.parameters)==null?void 0:N.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: 'The default switch component with form integration.'
      }
    }
  },
  play: async storyContext => {
    testDefaultValues(storyContext);
    await testToggleSwitches(storyContext);
    await testSubmission(storyContext);
  }
}`,...(P=(B=b.parameters)==null?void 0:B.docs)==null?void 0:P.source}}};const Ee=["Tests"];export{b as Tests,Ee as __namedExportsOrder,Pe as default};
